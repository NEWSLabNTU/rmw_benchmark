<?xml version="1.0" encoding="UTF-8"?>
<!--
  CycloneDDS configuration with Shared Memory (Iceoryx) support

  This configuration enables:
  - Shared memory transport for large messages (images)
  - Optimized for high-throughput, low-latency communication
  - Suitable for intra-host communication
-->
<CycloneDDS xmlns="https://cdds.io/config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="https://cdds.io/config https://raw.githubusercontent.com/eclipse-cyclonedds/cyclonedds/master/etc/cyclonedds.xsd">
  <Domain id="any">
    <General>
      <Interfaces>
        <NetworkInterface name="lo"/>
      </Interfaces>
      <AllowMulticast>default</AllowMulticast>
      <MaxMessageSize>65500B</MaxMessageSize>
      <FragmentSize>4000B</FragmentSize>
    </General>

    <Tracing>
      <Verbosity>warning</Verbosity>
      <OutputFile>stdout</OutputFile>
    </Tracing>

    <!-- Shared Memory Configuration -->
    <!-- Requires Iceoryx RouDi daemon to be running: /opt/ros/humble/bin/iox-roudi -->
    <SharedMemory>
      <Enable>true</Enable>
      <Locator>iceoryx</Locator>
    </SharedMemory>

    <Discovery>
      <ParticipantIndex>auto</ParticipantIndex>
      <EnableTopicDiscoveryEndpoints>false</EnableTopicDiscoveryEndpoints>
    </Discovery>

    <Internal>
      <Watermarks>
        <WhcHigh>500kB</WhcHigh>
      </Watermarks>
    </Internal>
  </Domain>
</CycloneDDS>
